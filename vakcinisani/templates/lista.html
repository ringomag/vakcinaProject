{% extends 'base.html' %}

{% block list %}
<div class="container">
  <br>
  <h3>Lista vakcinisanih građana:</h3>
  <br>

{% if messages %}
  {% for message in messages %}
    <!-- ovde se moze izabrati nesto od ponudjenih django levela:error, success, info..i tako ga selektovati -->
    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
      <div class="alert alert-success">
        {{ message }} <i class="fas fa-check-circle" style="color:green"></i>
      </div>
    {% endif %}
  {% endfor %}
{% endif %}


  <ul class="list-group" id="moja_lista" name="lista">
    {% for i in kreirani %}
    <li class="list-group-item">{{i.ime}} {{i.prezime}} <i class="fas fa-long-arrow-alt-right"></i>
       <span class="vakcina_oboji {% if i.vakcina == 'Sinofarm' %} sinofarm {% endif %} ">{{i.vakcina}}</span>
       <a class="btn btn-warning float-end btn-sm ms-1" href="{% url 'edit' i.id %}">Uredi</a>
       <a class="btn btn-primary float-end btn-sm" href="{% url 'vakcinisan' i.id %}">Detalji</a>
    </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}

{% block footer %}
<footer>
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
  © 2021 Copyright: Vaccine</div>
</footer>
{% endblock %}

{% block scripts %}
<!-- {{block.super}} -->
<script src="https://kit.fontawesome.com/9541bd8c06.js" crossorigin="anonymous"></script>
<script>
  // var astra = document.getElementById('vakcina_oboji');
  // var astra_vrednost = astra.value;
  // function crveno(){
  //   console.log("mladja");
  //   if (astra.value == 'Astra Zeneka'){
  //     astra_vrednost.style.color="red";
  //   }
  //   else{
  //     console.log('ringoo');
  //   }
  // }


    // prvo vise spanova ti je imalo isti id("vakcina_oboji").
    //to znaci da funkcija var astra = document.getElementById('vakcina_oboji'); vrati samo prvi element. primeti da se funckija zove sa jedninom getElementById.
    //taj prvi element ti nema vrednost astra zeneke tako da ga ne oboji. a ostale ne uzme u obzir.
    // zato smo dodali spanovima klasu(ne mora jedinstvena da bude. vidi gore u htmlu).
    //Koristimo funkciju document.getElementsByClassName("vakcina_oboji") koja vrati listu spanova koji imaju klasu vakcina_oboji
    //Zatim prodjemo for petlljom kroz svaki element i poredimo da li je vrednost Astra Zeneka. Ako jeste, dodamo color red.
    // eto ga
    var astra = document.getElementsByClassName("vakcina_oboji");
    console.log('lista elemenata sa klasom vakcina_oboji', astra);
    for (var i = 0; i < astra.length; i++) {
      var astra_vrednost = astra[i].innerHTML;
      console.log('astra_vrednost-vrednost svakog elementa liste spanova-'+i, astra_vrednost);
      if (astra_vrednost == 'Astra Zeneka'){
        astra[i].style.color="red";
      }
      else if (astra_vrednost == 'Fajzer') {
        astra[i].style.color="green";
      }
    }

</script>
{% endblock %}
